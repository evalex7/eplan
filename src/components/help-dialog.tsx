

"use client";

import {
    Dialog,
    DialogContent,
    DialogHeader,
    DialogTitle,
    DialogDescription,
    DialogFooter,
} from '@/components/ui/dialog';
import {
    Accordion,
    AccordionContent,
    AccordionItem,
    AccordionTrigger,
} from '@/components/ui/accordion';
import { Button } from './ui/button';
import { ScrollArea } from './ui/scroll-area';

interface HelpDialogProps {
  isOpen: boolean;
  setIsOpen: (isOpen: boolean) => void;
}

const faqItems = [
    {
        question: "Як додати звіт про виконання робіт?",
        answer: "Перейдіть на вкладку 'Завдання' -> 'Звіти'. Знайдіть потрібний об'єкт та розгорніть його, щоб побачити договори. Під кожним договором буде список обладнання. Натисніть кнопку '+ Додати звіт' навпроти конкретної одиниці обладнання, щоб заповнити деталі виконаної роботи."
    },
    {
        question: "Як додати нове обладнання до довідника?",
        answer: "Перейдіть на вкладку 'Дані' -> 'Довідник' та натисніть кнопку '+ Додати'. У спливаючому вікні ви можете обрати існуючу категорію або створити нову, а потім ввести назву моделі обладнання."
    },
    {
        question: "Як додати новий договір?",
        answer: "Перейдіть на вкладку 'Договори' та натисніть кнопку '+ Додати договір'. У діалоговому вікні заповніть дані договору, додайте необхідне обладнання (з довідника) та створіть хоча б один період ТО. Після цього натисніть 'Зберегти договір'."
    },
    {
        question: "Як додати обладнання до договору?",
        answer: "Під час створення нового або редагування існуючого договору (вкладка 'Договори'), ви побачите секцію 'Обладнання за договором'. Натисніть кнопку '+ Додати', щоб відкрити вікно, де ви зможете обрати модель з довідника та вказати серійний номер."
    },
    {
        question: "Як відзначити період ТО як виконаний?",
        answer: "Перейдіть у вкладку 'Завдання' -> 'ТО'. Розгорніть картку потрібного договору. У списку періодів ТО встановіть прапорець (галочку) навпроти відповідного періоду. Відкриється діалогове вікно, де потрібно буде вказати фактичні дати виконання та остаточний список інженерів, які виконували роботу. Після підтвердження статус періоду буде змінено на 'Виконано'."
    },
     {
        question: "Як приховати/показати виконані ТО?",
        answer: "Перейдіть у вкладку 'Параметри'. У розділі 'Загальні' знайдіть перемикач 'Показувати виконані ТО'. Увімкніть його, щоб бачити всі завдання (заплановані та виконані) на вкладці 'Завдання' -> 'ТО'. Вимкніть, щоб бачити тільки заплановані."
    },
    {
        question: "Як прив'язати обладнання до періоду ТО?",
        answer: "Під час створення або редагування договору, коли ви створюєте період ТО, з'явиться секція 'Обладнання для цього ТО'. Натисніть на кнопку 'Обрати обладнання', і ви зможете позначити прапорцями ті одиниці, що входять до цього обслуговування, зі списку вже доданого до договору обладнання."
    },
    {
        question: "Як експортувати або імпортувати дані?",
        answer: "На вкладці 'Параметри' є пункт 'Керування даними'. Там ви можете експортувати договори, інженерів, довідник або всі дані разом у JSON-файл для створення резервної копії. Також ви можете імпортувати дані з такого файлу."
    },
    {
        question: "Як переглянути завдання на місяць або для інженера?",
        answer: "Перейдіть на вкладку 'Завдання' -> 'ТО'. Вгорі сторінки ви знайдете фільтри. Ви можете обрати конкретний місяць, підрозділ або інженера, щоб побачити тільки ті завдання, які вас цікавлять."
    },
    {
        question: "Як змінити вигляд списку завдань на ТО (список/канбан)?",
        answer: "Перейдіть у вкладку 'Параметри' та знайдіть розділ 'Загальні'. У пункті 'Вигляд списку ТО' ви можете обрати один із трьох варіантів: 'Список', 'Канбан (по інженерах)' або 'Канбан (по підрозділах)'. Ваш вибір буде збережено для майбутніх сеансів."
    },
     {
        question: "Як налаштувати сповіщення?",
        answer: "Перейдіть в 'Параметри'. У розділі 'Сповіщення' ви можете керувати тим, які завдання відображати на вкладці 'Сповіщення': 'Показувати прострочені' та 'Показувати майбутні'. Опція 'Горизонт планування' дозволяє вказати, наскільки наперед ви хочете бачити майбутні завдання (наприклад, на 7, 14, 30 днів або до кінця поточного місяця)."
    },
    {
        question: "Як надіслати нагадування інженерам?",
        answer: "Перейдіть на вкладку 'Завдання' -> 'Сповіщення'. Вгорі сторінки адміністратору доступна кнопка 'Надіслати нагадування'. При натисканні на неї система автоматично знайде всі заплановані ТО на найближчі 7 днів і надішле email-нагадування призначеним інженерам. Ця дія виконується вручну."
    },
    {
        question: "Що таке 'Довідник' і як ним користуватися?",
        answer: "Довідник (вкладка 'Дані' -> 'Довідник') — це ваш централізований список моделей обладнання. Ви можете додавати нові моделі та категорії. Це гарантує, що при додаванні обладнання до договорів ви будете використовувати уніфіковані та коректні назви."
    },
    {
        question: "Що робити, якщо я бачу помилку 'WebSocket'?",
        answer: "Ця помилка пов'язана зі з'єднанням із сервером розробки і не є помилкою самого додатку. Зазвичай, вона виникає через нестабільне інтернет-з'єднання. Спробуйте перезавантажити сторінку. Якщо проблема не зникає, перевірте налаштування вашої мережі або VPN."
    },
    {
        question: "Як призначити виконавця на завдання ТО?",
        answer: "Перейдіть у вкладку 'Завдання' -> 'ТО'. Розгорніть картку потрібного договору. Для кожного запланованого періоду ТО є кнопка 'Призначити виконавців' (або 'Змінити виконавців', якщо хтось вже призначений). Натисніть її, щоб відкрити діалогове вікно та обрати одного або кількох інженерів зі списку."
    },
];


export default function HelpDialog({ isOpen, setIsOpen }: HelpDialogProps) {
  return (
    <Dialog open={isOpen} onOpenChange={setIsOpen}>
        <DialogContent className="max-w-2xl h-[85vh] sm:h-[80vh] flex flex-col">
            <DialogHeader>
            <DialogTitle>Довідковий центр</DialogTitle>
            <DialogDescription>
                Відповіді на поширені запитання щодо користування застосунком.
            </DialogDescription>
            </DialogHeader>

             <ScrollArea className="flex-grow pr-4 -mr-4">
                <Accordion type="single" collapsible className="w-full">
                    {faqItems.sort((a,b) => a.question.localeCompare(b.question)).map((item, index) => (
                        <AccordionItem value={`item-${index}`} key={index}>
                            <AccordionTrigger>{item.question}</AccordionTrigger>
                            <AccordionContent className="text-base">
                                {item.answer}
                            </AccordionContent>
                        </AccordionItem>
                    ))}
                </Accordion>
            </ScrollArea>

            <DialogFooter className="pt-4 flex-shrink-0">
                <Button onClick={() => setIsOpen(false)}>Закрити</Button>
            </DialogFooter>
        </DialogContent>
    </Dialog>
  );
}
